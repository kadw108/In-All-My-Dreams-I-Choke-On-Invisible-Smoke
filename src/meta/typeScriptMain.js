var mainScript=(()=>{var d=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var E=(e,t)=>{for(var n in t)d(e,n,{get:t[n],enumerable:!0})},L=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of y(t))!k.call(e,r)&&r!==n&&d(e,r,{get:()=>t[r],enumerable:!(i=v(t,r))||i.enumerable});return e};var b=e=>L(d({},"__esModule",{value:!0}),e);var M={};E(M,{addMenuPanels:()=>h,addReplaceLink:()=>g,addWrapperHtml:()=>p});var f=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","animation","audio","canvas","circle","clipPath","color-profile","cursor","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","handler","hkern","iframe","image","line","linearGradient","listener","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","prefetch","radialGradient","rect","script","set","solidColor","stop","style","svg","switch","symbol","tbreak","text","textArea","textPath","title","tref","tspan","unknown","use","video","view","vkern"];var a=new Set(f);a.delete("a");a.delete("audio");a.delete("canvas");a.delete("iframe");a.delete("script");a.delete("video");var x=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,A=e=>e===DocumentFragment,C=(e,t)=>{for(let[n,i]of Object.entries(t))n.startsWith("-")?e.style.setProperty(n,i):typeof i=="number"&&!x.test(n)?e.style[n]=`${i}px`:e.style[n]=i},w=e=>typeof e=="string"?a.has(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e):A(e)?document.createDocumentFragment():e(e.defaultProps),m=(e,t,n)=>{n!=null&&(/^xlink[AHRST]/.test(t)?e.setAttributeNS("http://www.w3.org/1999/xlink",t.replace("xlink","xlink:").toLowerCase(),n):e.setAttribute(t,n))},u=(e,t)=>{for(let n of t)n instanceof Node?e.appendChild(n):Array.isArray(n)?u(e,n):typeof n!="boolean"&&typeof n<"u"&&n!==null&&e.appendChild(document.createTextNode(n))},N=new Set(["contentEditable","draggable","spellCheck","value","autoReverse","externalResourcesRequired","focusable","preserveAlpha"]),s=(e,t,...n)=>{var i;let r=w(e);if(u(r,n),r instanceof DocumentFragment||!t)return r;for(let[o,l]of Object.entries(t))if(o==="htmlFor"&&(o="for"),o==="class"||o==="className"){let c=(i=r.getAttribute("class"))!==null&&i!==void 0?i:"";m(r,"class",(c+" "+String(l)).trim())}else if(o==="style")C(r,l);else if(o.startsWith("on")){let c=o.slice(2).toLowerCase().replace(/^-/,"");r.addEventListener(c,l)}else o==="dangerouslySetInnerHTML"&&"__html"in l?r.innerHTML=l.__html:o!=="key"&&(N.has(o)||l!==!1)&&m(r,o,l===!0?"":l);return r};function p(){if(document.getElementById("contents")===null){let e=document.getElementById("iff-snippet");if(e===null){console.error("iffSnippet is null");return}e.remove();let t=s("div",{id:"contents"},s("div",{id:"bg",className:"fullscreenBg"}),s("div",{id:"screenCover",className:"fullscreenBg"}),s("div",{id:"passages"},s("div",{id:"screenBg"}),s("div",{id:"screenContents",className:"absoluteAlign"},e)));document.getElementById("iff-story")?.appendChild(t)}}function S(e){let t=e.target.getAttribute("identifier"),n=document.querySelectorAll(".linkReplacer[identifier='"+t+"']");if(n.length===0){console.error("Replacelink without replacer! Identifier "+t),console.error(e.target);return}n.forEach(r=>{r.classList.contains("hidden")&&r.classList.remove("hidden")}),document.querySelectorAll(".removedOnClick[identifier='"+t+"']").forEach(r=>{r.classList.add("hidden")})}function R(e){let t=e.target.getAttribute("identifier"),n=document.querySelectorAll(".linkReplacer[identifier='"+t+"']");if(n.length===0){console.error("Replacelink without replacer! Identifier "+t),console.error(e.target);return}n.forEach(r=>{r.classList.contains("hidden")||r.classList.add("hidden")}),document.querySelectorAll(".removedOnClick[identifier='"+t+"']").forEach(r=>{r.classList.remove("hidden")})}function g(){Array.from(document.getElementsByClassName("linkReplaced")).forEach(e=>{e.addEventListener("click",S)}),Array.from(document.getElementsByClassName("linkHider")).forEach(e=>{e.addEventListener("click",R)})}function B(e){if(e.target===null)return;let t=e.target.getAttribute("identifier"),n=document.querySelector(".panelFull[identifier='"+t+"']");if(n===null){console.error("Replacelink without replacer!"),console.error(e.target);return}n.classList.remove("hidden")}function F(e){let t=s("button",{type:"button",className:"closeButton"},"X");t.addEventListener("click",()=>{e.classList.add("hidden")}),e.prepend(t)}function h(){Array.from(document.getElementsByClassName("panelOpener")).forEach(e=>{e.addEventListener("click",B)}),Array.from(document.getElementsByClassName("panelFull")).forEach(e=>{F(e)})}return b(M);})();
window.mainScript = mainScript;
