var mainScript=(()=>{var p=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var L=(e,t)=>{for(var n in t)p(e,n,{get:t[n],enumerable:!0})},S=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of O(t))!A.call(e,r)&&r!==n&&p(e,r,{get:()=>t[r],enumerable:!(a=P(t,r))||a.enumerable});return e};var D=e=>S(p({},"__esModule",{value:!0}),e);var G={};L(G,{Inventory:()=>u,addArrow:()=>w,addMenuPanels:()=>v,addNpc:()=>E,addReplaceLink:()=>x,addWrapperHtml:()=>h,dialogue:()=>I,showDialogue:()=>d});var m=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","animation","audio","canvas","circle","clipPath","color-profile","cursor","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","handler","hkern","iframe","image","line","linearGradient","listener","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","prefetch","radialGradient","rect","script","set","solidColor","stop","style","svg","switch","symbol","tbreak","text","textArea","textPath","title","tref","tspan","unknown","use","video","view","vkern"];var c=new Set(m);c.delete("a");c.delete("audio");c.delete("canvas");c.delete("iframe");c.delete("script");c.delete("video");var C=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,N=e=>e===DocumentFragment,B=(e,t)=>{for(let[n,a]of Object.entries(t))n.startsWith("-")?e.style.setProperty(n,a):typeof a=="number"&&!C.test(n)?e.style[n]=`${a}px`:e.style[n]=a},T=e=>typeof e=="string"?c.has(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e):N(e)?document.createDocumentFragment():e(e.defaultProps),g=(e,t,n)=>{n!=null&&(/^xlink[AHRST]/.test(t)?e.setAttributeNS("http://www.w3.org/1999/xlink",t.replace("xlink","xlink:").toLowerCase(),n):e.setAttribute(t,n))},y=(e,t)=>{for(let n of t)n instanceof Node?e.appendChild(n):Array.isArray(n)?y(e,n):typeof n!="boolean"&&typeof n<"u"&&n!==null&&e.appendChild(document.createTextNode(n))},H=new Set(["contentEditable","draggable","spellCheck","value","autoReverse","externalResourcesRequired","focusable","preserveAlpha"]),i=(e,t,...n)=>{var a;let r=T(e);if(y(r,n),r instanceof DocumentFragment||!t)return r;for(let[o,s]of Object.entries(t))if(o==="htmlFor"&&(o="for"),o==="class"||o==="className"){let l=(a=r.getAttribute("class"))!==null&&a!==void 0?a:"";g(r,"class",(l+" "+String(s)).trim())}else if(o==="style")B(r,s);else if(o.startsWith("on")){let l=o.slice(2).toLowerCase().replace(/^-/,"");r.addEventListener(l,s)}else o==="dangerouslySetInnerHTML"&&"__html"in s?r.innerHTML=s.__html:o!=="key"&&(H.has(o)||s!==!1)&&g(r,o,s===!0?"":s);return r};function h(){if(document.getElementById("contents")===null){let e=document.getElementById("iff-snippet");if(e===null){console.error("iffSnippet is null");return}e.remove();let t=i("div",{id:"contents"},i("div",{id:"bg",className:"fullscreenBg"}),i("div",{id:"screenCover",className:"fullscreenBg"}),i("div",{id:"passages"},i("div",{id:"screenBg"}),i("div",{id:"screenContents",className:"absoluteAlign"},e)));document.getElementById("iff-story")?.appendChild(t)}}function M(e){let t=e.target.getAttribute("identifier"),n=document.querySelectorAll(".linkReplacer[identifier='"+t+"']");if(n.length===0){console.error("Replacelink without replacer! Identifier "+t),console.error(e.target);return}n.forEach(r=>{r.classList.contains("hidden")&&r.classList.remove("hidden")}),document.querySelectorAll(".removedOnClick[identifier='"+t+"']").forEach(r=>{r.classList.add("hidden")})}function F(e){let t=e.target.getAttribute("identifier"),n=document.querySelectorAll(".linkReplacer[identifier='"+t+"']");if(n.length===0){console.error("Replacelink without replacer! Identifier "+t),console.error(e.target);return}n.forEach(r=>{r.classList.contains("hidden")||r.classList.add("hidden")}),document.querySelectorAll(".removedOnClick[identifier='"+t+"']").forEach(r=>{r.classList.remove("hidden")})}function x(){Array.from(document.getElementsByClassName("linkReplaced")).forEach(e=>{e.addEventListener("click",M)}),Array.from(document.getElementsByClassName("linkHider")).forEach(e=>{e.addEventListener("click",F)})}function R(e){if(e.target===null)return;let t=e.target.getAttribute("identifier"),n=document.querySelector(".panelFull[identifier='"+t+"']");if(n===null){console.error("Replacelink without replacer!"),console.error(e.target);return}n.classList.remove("hidden")}function W(e){let t=i("button",{type:"button",className:"closeButton"},"X");t.addEventListener("click",()=>{e.classList.add("hidden")}),e.prepend(t)}function v(){Array.from(document.getElementsByClassName("panelOpener")).forEach(e=>{e.addEventListener("click",R)}),Array.from(document.getElementsByClassName("panelFull")).forEach(e=>{W(e)})}function b(e){let t=i("button",{type:"button",className:"closeButton"},"X");return t.addEventListener("click",()=>{e.remove()}),e.prepend(t),t}function f(e){e.innerHTML="",b(e)}function w(e,t,n=void 0,a=void 0){let r=document.getElementById("iff-snippet"),o=i("img",{className:"arrow",src:"assets/arrow.gif",alt:"arrow"});switch(e){case"up":o.style.transform="rotate(270deg)",o.style.top="2%",o.style.left="47%";break;case"down":o.style.transform="rotate(90deg)",o.style.top="92%",o.style.left="47%";break;case"left":o.style.transform="rotate(180deg)",o.style.top="45%",o.style.left="1%";break;case"right":o.style.top="45%",o.style.left="95%";break;default:console.error("Trying to create arrow with invalid direction: "+e);return}n!==void 0&&(o.style.top=n+"%"),a!==void 0&&(o.style.left=a+"%"),o.addEventListener("click",()=>{story.showSnippet(t)}),r.append(o)}function k(e,t){let n=i("div",{className:"absoluteAlign blackBg cutscenePanel"},i("img",{src:e})),a=document.getElementById("screenCover");a.style.display="block",document.getElementById("iff-snippet").append(n),setTimeout(()=>{b(n).addEventListener("click",()=>{a.style.display="none"})},t)}function E(e,t,n,a,r,o){let s=document.getElementById("iff-snippet"),l=i("img",{className:"npc",src:e,id:r,alt:r});l.style.top=t+"%",l.style.left=n+"%",l.style.width=a+"%",l.addEventListener("click",()=>{d(o)}),s.append(l)}function d(e,t=0){let n=e[t],a=Y();f(a);let r=i("p",null,n.text);if(a.append(r),a.append(i("br",null)),n.playerOptions!==void 0)for(let o=0;o<n.playerOptions.length;o++){let s=n.playerOptions[o],l=i("a",null,s.text);s.nextPassage!==null?l.addEventListener("click",()=>{d(e,s.nextPassage)}):l.addEventListener("click",()=>{a.remove()}),s.callback!==void 0&&l.addEventListener("click",()=>{s.callback()}),a.append(l),o<n.playerOptions.length-1&&a.append(i("span",null,"\xA0|\xA0"))}else{let o=i("a",null,"\u2B95 Next");o.addEventListener("click",()=>{d(e,t+1)}),a.append(o)}}function Y(){let e=document.querySelector(".dialoguePanel");return e===null&&(e=_()),e}function _(){let e=i("div",{className:"absoluteAlign bottomHalf blackBg dialoguePanel"});return f(e),document.getElementById("iff-snippet").append(e),e}var I={treasureDialogue:[{text:"Good news: to celebrate your arrival, they planted a treasure in the eastern glade. You should go find it!",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],treasureDialogue2:[{text:"Oh! You've found the treasure... I can see it on you!"},{text:"You're so brave.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],travelDialogue:[{text:"I was born in the suburbs of Melbourne, but my family moved to Canberra when I was young."},{text:"Where are you from?",playerOptions:[{text:"Georgia.",nextPassage:2},{text:"Nowhere.",nextPassage:4}]},{text:"Oh, Georgia? The United States?"},{text:"I think I've heard of that place... Tell your friends there hello for me.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]},{text:"Wait, really? Oh! That's wonderful! We can visit there together, and..."},{text:"Oh, you were joking? Oh... okay...",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],mournDialogue:[{text:"This garden has fallen into disrepair. What a shame. What a shame. How foolish you and I were, to give up the best of all things."},{text:"In return for what? A world full of smoke...",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],smokeDialogue1:[{text:"That feeling you get all the time, like you wanna choke and vomit? That's the invisible smoke."},{text:"That's what kills people. Not old age, not heart disease. Invisible smoke. Everywhere."},{text:"But you and I, we're the only ones who can feel it. Everyone's out there dying of invisible smoke but we're the only ones having a proper allergic reaction to it. Crazy, right?",playerOptions:[{text:"How do I get away from the invisible smoke?",nextPassage:3}]},{text:"Uh, what? You can't. That's the whole point. Haha.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],smokeDialogue2:[{text:"Hey. What's up?",playerOptions:[{text:"Can you tell me more about the invisible smoke?",nextPassage:1}]},{text:"Whatddya mean?",playerOptions:[{text:"It has to have a name. Or a proper chemical composition. I think that's how science works.",nextPassage:2}]},{text:"Whoa oh, caught me there, kid. It's called radon-108. It's a special isotope of radon that can't be detected by your human technology. You wanna go around your suburbs and take a look? It's everywhere. I promise."},{text:"Take care! Don't die of the invisible smoke!",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],flowerDialogue:[{text:"You need to grow beyond the confines of the physical world. A flowering is needed for this."},{text:"You'll need a flower, maybe two... No, one will do.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],flowerDialogue2:[{text:"A fine start... Still, more is needed."},{text:"Heed my words.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],gateDialogue:[{text:"You again..."},{text:"You do know you are intruding...?"},{text:"I seldom see your kind. To cross the rubicon is no light task."},{text:"Only the worthy are allowed beyond here.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],gateDialogue2:[{text:"You're still here..."},{text:"You have marked yourself, at least. It's a start."},{text:"It ought to be worth testing whether the gate opens for you, now.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],miscDialogue1:[{text:"A new world will be born after you die."},{text:"And it will be more beautiful than anything you can conceive.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],gate1:[{text:"The trees are losing their definition. There is something beyond them, shimmering..."},{text:"It is beautiful in a way I cannot describe."},{text:"..."},{text:"Touch it?",playerOptions:[{text:"Yes",nextPassage:4},{text:"No",nextPassage:null}]},{text:"..."},{text:"It burns...",playerOptions:[{text:"WAKE UP",nextPassage:null,callback:()=>{story.showSnippet("youA_transition")}}]}],gate1_2:[{text:"The trees part for me easily.",playerOptions:[{text:"Enter",nextPassage:null,callback:()=>{story.showSnippet("garden2_center")}}]}],gate2:[{text:"It hurts to look at..."},{text:"I am afraid.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],lily1:[{text:"Something growing here.",playerOptions:[{text:"Pick it.",nextPassage:null,callback:()=>{k("assets/cutscene1_2.gif",6500),document.getElementById("lily1").remove(),story.myInventory.addItem({name:"lily",iconSrc:"assets/item1.gif"}),story.myInventory.addInventory(),story.lilyPicked=!0}},{text:"Don't.",nextPassage:null}]}]};var u=class{items;constructor(){this.items=[]}addItem(t){this.items.push(t)}checkHasItem(t){for(let n of this.items)if(n.name===t)return!0;return!1}addInventory(){let t=i("div",{id:"inventory"});for(let a of this.items)t.append(i("img",{src:a.iconSrc}));document.getElementById("iff-snippet").append(t)}};return D(G);})();
window.mainScript = mainScript;
