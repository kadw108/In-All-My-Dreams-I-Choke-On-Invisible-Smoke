var mainScript=(()=>{var u=Object.defineProperty;var k=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var P=(e,t)=>{for(var n in t)u(e,n,{get:t[n],enumerable:!0})},L=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of E(t))!A.call(e,r)&&r!==n&&u(e,r,{get:()=>t[r],enumerable:!(a=k(t,r))||a.enumerable});return e};var O=e=>L(u({},"__esModule",{value:!0}),e);var G={};P(G,{addArrow:()=>x,addMenuPanels:()=>y,addNpc:()=>b,addReplaceLink:()=>h,addWrapperHtml:()=>g,dialogue:()=>w,showDialogue:()=>c});var f=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","animation","audio","canvas","circle","clipPath","color-profile","cursor","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","handler","hkern","iframe","image","line","linearGradient","listener","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","prefetch","radialGradient","rect","script","set","solidColor","stop","style","svg","switch","symbol","tbreak","text","textArea","textPath","title","tref","tspan","unknown","use","video","view","vkern"];var d=new Set(f);d.delete("a");d.delete("audio");d.delete("canvas");d.delete("iframe");d.delete("script");d.delete("video");var N=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,I=e=>e===DocumentFragment,C=(e,t)=>{for(let[n,a]of Object.entries(t))n.startsWith("-")?e.style.setProperty(n,a):typeof a=="number"&&!N.test(n)?e.style[n]=`${a}px`:e.style[n]=a},D=e=>typeof e=="string"?d.has(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e):I(e)?document.createDocumentFragment():e(e.defaultProps),p=(e,t,n)=>{n!=null&&(/^xlink[AHRST]/.test(t)?e.setAttributeNS("http://www.w3.org/1999/xlink",t.replace("xlink","xlink:").toLowerCase(),n):e.setAttribute(t,n))},m=(e,t)=>{for(let n of t)n instanceof Node?e.appendChild(n):Array.isArray(n)?m(e,n):typeof n!="boolean"&&typeof n<"u"&&n!==null&&e.appendChild(document.createTextNode(n))},S=new Set(["contentEditable","draggable","spellCheck","value","autoReverse","externalResourcesRequired","focusable","preserveAlpha"]),i=(e,t,...n)=>{var a;let r=D(e);if(m(r,n),r instanceof DocumentFragment||!t)return r;for(let[o,s]of Object.entries(t))if(o==="htmlFor"&&(o="for"),o==="class"||o==="className"){let l=(a=r.getAttribute("class"))!==null&&a!==void 0?a:"";p(r,"class",(l+" "+String(s)).trim())}else if(o==="style")C(r,s);else if(o.startsWith("on")){let l=o.slice(2).toLowerCase().replace(/^-/,"");r.addEventListener(l,s)}else o==="dangerouslySetInnerHTML"&&"__html"in s?r.innerHTML=s.__html:o!=="key"&&(S.has(o)||s!==!1)&&p(r,o,s===!0?"":s);return r};function g(){if(document.getElementById("contents")===null){let e=document.getElementById("iff-snippet");if(e===null){console.error("iffSnippet is null");return}e.remove();let t=i("div",{id:"contents"},i("div",{id:"bg",className:"fullscreenBg"}),i("div",{id:"screenCover",className:"fullscreenBg"}),i("div",{id:"passages"},i("div",{id:"screenBg"}),i("div",{id:"screenContents",className:"absoluteAlign"},e)));document.getElementById("iff-story")?.appendChild(t)}}function T(e){let t=e.target.getAttribute("identifier"),n=document.querySelectorAll(".linkReplacer[identifier='"+t+"']");if(n.length===0){console.error("Replacelink without replacer! Identifier "+t),console.error(e.target);return}n.forEach(r=>{r.classList.contains("hidden")&&r.classList.remove("hidden")}),document.querySelectorAll(".removedOnClick[identifier='"+t+"']").forEach(r=>{r.classList.add("hidden")})}function B(e){let t=e.target.getAttribute("identifier"),n=document.querySelectorAll(".linkReplacer[identifier='"+t+"']");if(n.length===0){console.error("Replacelink without replacer! Identifier "+t),console.error(e.target);return}n.forEach(r=>{r.classList.contains("hidden")||r.classList.add("hidden")}),document.querySelectorAll(".removedOnClick[identifier='"+t+"']").forEach(r=>{r.classList.remove("hidden")})}function h(){Array.from(document.getElementsByClassName("linkReplaced")).forEach(e=>{e.addEventListener("click",T)}),Array.from(document.getElementsByClassName("linkHider")).forEach(e=>{e.addEventListener("click",B)})}function H(e){if(e.target===null)return;let t=e.target.getAttribute("identifier"),n=document.querySelector(".panelFull[identifier='"+t+"']");if(n===null){console.error("Replacelink without replacer!"),console.error(e.target);return}n.classList.remove("hidden")}function M(e){let t=i("button",{type:"button",className:"closeButton"},"X");t.addEventListener("click",()=>{e.classList.add("hidden")}),e.prepend(t)}function y(){Array.from(document.getElementsByClassName("panelOpener")).forEach(e=>{e.addEventListener("click",H)}),Array.from(document.getElementsByClassName("panelFull")).forEach(e=>{M(e)})}function x(e,t,n=void 0,a=void 0){let r=document.getElementById("iff-snippet"),o=i("img",{className:"arrow",src:"assets/arrow.gif",alt:"arrow"});switch(e){case"up":o.style.transform="rotate(270deg)",o.style.top="2%",o.style.left="47%";break;case"down":o.style.transform="rotate(90deg)",o.style.top="92%",o.style.left="47%";break;case"left":o.style.transform="rotate(180deg)",o.style.top="45%",o.style.left="1%";break;case"right":o.style.top="45%",o.style.left="95%";break;default:console.error("Trying to create arrow with invalid direction: "+e);return}n!==void 0&&(o.style.top=n+"%"),a!==void 0&&(o.style.left=a+"%"),o.addEventListener("click",()=>{story.showSnippet(t)}),r.append(o)}function b(e,t,n,a,r,o){let s=document.getElementById("iff-snippet"),l=i("img",{className:"npc",src:e,alt:r});l.style.top=t+"%",l.style.left=n+"%",l.style.width=a+"%",l.addEventListener("click",()=>{c(o)}),s.append(l)}function c(e,t=0){let n=e[t],a=R();v(a);let r=i("p",null,n.text);if(a.append(r),a.append(i("br",null)),n.playerOptions!==void 0)for(let o=0;o<n.playerOptions.length;o++){let s=n.playerOptions[o],l=i("a",null,s.text);s.nextPassage!==null?l.addEventListener("click",()=>{c(e,s.nextPassage)}):l.addEventListener("click",()=>{a.remove()}),a.append(l),o<n.playerOptions.length-1&&a.append(i("span",null,"\xA0|\xA0"))}else{let o=i("a",null,"\u2B95 Next");o.addEventListener("click",()=>{c(e,t+1)}),a.append(o)}}function R(){let e=document.querySelector(".dialoguePanel");return e===null&&(e=F()),e}function F(){let e=i("div",{className:"absoluteAlign bottomHalf blackBg dialoguePanel"});return v(e),document.getElementById("iff-snippet").append(e),e}function v(e){let t=i("button",{type:"button",className:"closeButton"},"X");t.addEventListener("click",()=>{e.remove()}),e.innerHTML="",e.prepend(t)}var w={treasureDialogue:[{text:"Good news: to celebrate your arrival, they planted a treasure in the eastern corner. You should go find and mark it!",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],travelDialogue:[{text:"Good day! Where are you from?"},{text:"Oh, Georgia? The US?"},{text:"Oh, what a fun place! I was born in the suburbs of Melbourne, you know, but my family moved to Canberra when I was young."},{text:"How's Georgia? Tell your friends there hello for me.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],mournDialogue:[{text:"This garden has fallen into disrepair. What a shame. What a shame. How foolish you and I were, to give up the best and brightest of all things."},{text:"In return for what? A world full of smoke...",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],smokeDialogue1:[{text:"That feeling you get all the time, like you wanna choke and vomit? That's the invisible smoke. That's what kills people. Not old age, not heart disease. Invisible smoke. Everywhere. But you and I, we're the only ones who can feel it. Everyone's out there dying of invisible smoke but we're the only ones having a proper allergic reaction to it. Crazy, right?",playerOptions:[{text:"How do I get away from the invisible smoke?",nextPassage:1}]},{text:"Uh, what? You can't. That's the whole point. Haha.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],smokeDialogue2:[{text:"Hey. What's up?",playerOptions:[{text:"Can you tell me more about the invisible smoke?",nextPassage:1}]},{text:"Whatddya mean?",playerOptions:[{text:"It has to have a name. Or a proper chemical composition. I think that's how science works.",nextPassage:2}]},{text:"Whoa oh, caught me there, kid. It's called radon-108. It's a special isotope of radon that can't be detected by your human technology. You wanna go around your suburbs and take a look? It's everywhere. I promise."},{text:"Take care! Don't die of the invisible smoke!",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],flowerDialogue:[{text:"You need to grow beyond the confines of the physical world. A flowering is needed for this."},{text:"You'll need a flower, maybe two."},{text:"No, one will do.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],misc1:[{text:"A new world will be born after you die."},{text:"And it will be more beautiful than anything you can conceive.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],gate1:[{text:"It shimmers..."},{text:"..."},{text:"Touch it?",playerOptions:[{text:"Yes",nextPassage:4},{text:"No",nextPassage:null}]},{text:"..."},{text:"Everything is bright and infinitely detailed...",playerOptions:[{text:"WAKE UP",nextPassage:null}]}]};return O(G);})();
window.mainScript = mainScript;
