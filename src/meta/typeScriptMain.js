var mainScript=(()=>{var u=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var O=Object.getOwnPropertyNames;var A=Object.prototype.hasOwnProperty;var I=(e,t)=>{for(var n in t)u(e,n,{get:t[n],enumerable:!0})},L=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of O(t))!A.call(e,a)&&a!==n&&u(e,a,{get:()=>t[a],enumerable:!(r=P(t,a))||r.enumerable});return e};var C=e=>L(u({},"__esModule",{value:!0}),e);var _={};I(_,{addArrow:()=>v,addMenuPanels:()=>x,addNpc:()=>k,addReplaceLink:()=>y,addWrapperHtml:()=>h,dialogue:()=>E,showDialogue:()=>d});var f=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","animation","audio","canvas","circle","clipPath","color-profile","cursor","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","handler","hkern","iframe","image","line","linearGradient","listener","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","prefetch","radialGradient","rect","script","set","solidColor","stop","style","svg","switch","symbol","tbreak","text","textArea","textPath","title","tref","tspan","unknown","use","video","view","vkern"];var c=new Set(f);c.delete("a");c.delete("audio");c.delete("canvas");c.delete("iframe");c.delete("script");c.delete("video");var N=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,T=e=>e===DocumentFragment,B=(e,t)=>{for(let[n,r]of Object.entries(t))n.startsWith("-")?e.style.setProperty(n,r):typeof r=="number"&&!N.test(n)?e.style[n]=`${r}px`:e.style[n]=r},D=e=>typeof e=="string"?c.has(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e):T(e)?document.createDocumentFragment():e(e.defaultProps),m=(e,t,n)=>{n!=null&&(/^xlink[AHRST]/.test(t)?e.setAttributeNS("http://www.w3.org/1999/xlink",t.replace("xlink","xlink:").toLowerCase(),n):e.setAttribute(t,n))},g=(e,t)=>{for(let n of t)n instanceof Node?e.appendChild(n):Array.isArray(n)?g(e,n):typeof n!="boolean"&&typeof n<"u"&&n!==null&&e.appendChild(document.createTextNode(n))},S=new Set(["contentEditable","draggable","spellCheck","value","autoReverse","externalResourcesRequired","focusable","preserveAlpha"]),i=(e,t,...n)=>{var r;let a=D(e);if(g(a,n),a instanceof DocumentFragment||!t)return a;for(let[o,s]of Object.entries(t))if(o==="htmlFor"&&(o="for"),o==="class"||o==="className"){let l=(r=a.getAttribute("class"))!==null&&r!==void 0?r:"";m(a,"class",(l+" "+String(s)).trim())}else if(o==="style")B(a,s);else if(o.startsWith("on")){let l=o.slice(2).toLowerCase().replace(/^-/,"");a.addEventListener(l,s)}else o==="dangerouslySetInnerHTML"&&"__html"in s?a.innerHTML=s.__html:o!=="key"&&(S.has(o)||s!==!1)&&m(a,o,s===!0?"":s);return a};function h(){if(document.getElementById("contents")===null){let e=document.getElementById("iff-snippet");if(e===null){console.error("iffSnippet is null");return}e.remove();let t=i("div",{id:"contents"},i("div",{id:"bg",className:"fullscreenBg"}),i("div",{id:"screenCover",className:"fullscreenBg"}),i("div",{id:"passages"},i("div",{id:"screenBg"}),i("div",{id:"screenContents",className:"absoluteAlign"},e)));document.getElementById("iff-story")?.appendChild(t)}}function M(e){let t=e.target.getAttribute("identifier"),n=document.querySelectorAll(".linkReplacer[identifier='"+t+"']");if(n.length===0){console.error("Replacelink without replacer! Identifier "+t),console.error(e.target);return}n.forEach(a=>{a.classList.contains("hidden")&&a.classList.remove("hidden")}),document.querySelectorAll(".removedOnClick[identifier='"+t+"']").forEach(a=>{a.classList.add("hidden")})}function H(e){let t=e.target.getAttribute("identifier"),n=document.querySelectorAll(".linkReplacer[identifier='"+t+"']");if(n.length===0){console.error("Replacelink without replacer! Identifier "+t),console.error(e.target);return}n.forEach(a=>{a.classList.contains("hidden")||a.classList.add("hidden")}),document.querySelectorAll(".removedOnClick[identifier='"+t+"']").forEach(a=>{a.classList.remove("hidden")})}function y(){Array.from(document.getElementsByClassName("linkReplaced")).forEach(e=>{e.addEventListener("click",M)}),Array.from(document.getElementsByClassName("linkHider")).forEach(e=>{e.addEventListener("click",H)})}function F(e){if(e.target===null)return;let t=e.target.getAttribute("identifier"),n=document.querySelector(".panelFull[identifier='"+t+"']");if(n===null){console.error("Replacelink without replacer!"),console.error(e.target);return}n.classList.remove("hidden")}function R(e){let t=i("button",{type:"button",className:"closeButton"},"X");t.addEventListener("click",()=>{e.classList.add("hidden")}),e.prepend(t)}function x(){Array.from(document.getElementsByClassName("panelOpener")).forEach(e=>{e.addEventListener("click",F)}),Array.from(document.getElementsByClassName("panelFull")).forEach(e=>{R(e)})}function b(e){let t=i("button",{type:"button",className:"closeButton"},"X");return t.addEventListener("click",()=>{e.remove()}),e.prepend(t),t}function p(e){e.innerHTML="",b(e)}function v(e,t,n=void 0,r=void 0){let a=document.getElementById("iff-snippet"),o=i("img",{className:"arrow",src:"assets/arrow.gif",alt:"arrow"});switch(e){case"up":o.style.transform="rotate(270deg)",o.style.top="2%",o.style.left="47%";break;case"down":o.style.transform="rotate(90deg)",o.style.top="92%",o.style.left="47%";break;case"left":o.style.transform="rotate(180deg)",o.style.top="45%",o.style.left="1%";break;case"right":o.style.top="45%",o.style.left="95%";break;default:console.error("Trying to create arrow with invalid direction: "+e);return}n!==void 0&&(o.style.top=n+"%"),r!==void 0&&(o.style.left=r+"%"),o.addEventListener("click",()=>{story.showSnippet(t)}),a.append(o)}function w(e,t){let n=i("div",{className:"absoluteAlign blackBg cutscenePanel"},i("img",{src:e})),r=document.getElementById("screenCover");r.style.display="block",document.getElementById("iff-snippet").append(n),setTimeout(()=>{b(n).addEventListener("click",()=>{r.style.display="none"})},t)}function k(e,t,n,r,a,o){let s=document.getElementById("iff-snippet"),l=i("img",{className:"npc",src:e,id:a,alt:a});l.style.top=t+"%",l.style.left=n+"%",l.style.width=r+"%",l.addEventListener("click",()=>{d(o)}),s.append(l)}function d(e,t=0){let n=e[t],r=W();p(r);let a=i("p",null,n.text);if(r.append(a),r.append(i("br",null)),n.playerOptions!==void 0)for(let o=0;o<n.playerOptions.length;o++){let s=n.playerOptions[o],l=i("a",null,s.text);s.nextPassage!==null?l.addEventListener("click",()=>{d(e,s.nextPassage)}):l.addEventListener("click",()=>{r.remove()}),s.callback!==void 0&&l.addEventListener("click",()=>{s.callback()}),r.append(l),o<n.playerOptions.length-1&&r.append(i("span",null,"\xA0|\xA0"))}else{let o=i("a",null,"\u2B95 Next");o.addEventListener("click",()=>{d(e,t+1)}),r.append(o)}}function W(){let e=document.querySelector(".dialoguePanel");return e===null&&(e=G()),e}function G(){let e=i("div",{className:"absoluteAlign bottomHalf blackBg dialoguePanel"});return p(e),document.getElementById("iff-snippet").append(e),e}var E={treasureDialogue:[{text:"Good news: to celebrate your arrival, they planted a treasure in the eastern corner. You should go find and mark it!",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],travelDialogue:[{text:"I was born in the suburbs of Melbourne, but my family moved to Canberra when I was young."},{text:"Where are you from?",playerOptions:[{text:"Georgia.",nextPassage:2},{text:"Nowhere.",nextPassage:4}]},{text:"Oh, Georgia? The United States?"},{text:"I think I've heard of that place... Tell your friends there hello for me.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]},{text:"Wait, really? Oh! That's wonderful! We can visit there together, and..."},{text:"Oh, you were joking? Oh... okay...",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],mournDialogue:[{text:"This garden has fallen into disrepair. What a shame. What a shame. How foolish you and I were, to give up the best of all things."},{text:"In return for what? A world full of smoke...",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],smokeDialogue1:[{text:"That feeling you get all the time, like you wanna choke and vomit? That's the invisible smoke."},{text:"That's what kills people. Not old age, not heart disease. Invisible smoke. Everywhere."},{text:"But you and I, we're the only ones who can feel it. Everyone's out there dying of invisible smoke but we're the only ones having a proper allergic reaction to it. Crazy, right?",playerOptions:[{text:"How do I get away from the invisible smoke?",nextPassage:3}]},{text:"Uh, what? You can't. That's the whole point. Haha.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],smokeDialogue2:[{text:"Hey. What's up?",playerOptions:[{text:"Can you tell me more about the invisible smoke?",nextPassage:1}]},{text:"Whatddya mean?",playerOptions:[{text:"It has to have a name. Or a proper chemical composition. I think that's how science works.",nextPassage:2}]},{text:"Whoa oh, caught me there, kid. It's called radon-108. It's a special isotope of radon that can't be detected by your human technology. You wanna go around your suburbs and take a look? It's everywhere. I promise."},{text:"Take care! Don't die of the invisible smoke!",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],flowerDialogue:[{text:"You need to grow beyond the confines of the physical world. A flowering is needed for this."},{text:"You'll need a flower, maybe two."},{text:"No, one will do.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],gateDialogue:[{text:"You again."},{text:"You do know you are intruding...? To pass the rubicon is no light task."},{text:"Only the worthy are allowed beyond this gate.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],miscDialogue1:[{text:"A new world will be born after you die."},{text:"And it will be more beautiful than anything you can conceive.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],gate1:[{text:"The trees are losing their definition. There is something beyond them, shimmering..."},{text:"It is beautiful in a way I cannot describe."},{text:"..."},{text:"Touch it?",playerOptions:[{text:"Yes",nextPassage:4},{text:"No",nextPassage:null}]},{text:"..."},{text:"It burns...",playerOptions:[{text:"WAKE UP",nextPassage:null,callback:()=>{story.showSnippet("youA_transition")}}]}],gate1_2:[{text:"The trees part for me easily.",playerOptions:[{text:"Enter",nextPassage:null,callback:()=>{story.showSnippet("garden2_center")}}]}],gate2:[{text:"It hurts to look at."},{text:"...Too afraid to approach.",playerOptions:[{text:"\u2B95 End",nextPassage:null}]}],lily1:[{text:"Growing here.",playerOptions:[{text:"Pick it up.",nextPassage:null,callback:()=>{w("assets/cutscene1_2.gif",6500),document.getElementById("lily1").remove()}},{text:"Don't.",nextPassage:null}]}]};return C(_);})();
window.mainScript = mainScript;
